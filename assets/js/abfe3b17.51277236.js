"use strict";(self.webpackChunkzaindoc=self.webpackChunkzaindoc||[]).push([[3310],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>g});var a=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=a.createContext({}),u=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=u(e.components);return a.createElement(s.Provider,{value:n},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),p=u(t),m=o,g=p["".concat(s,".").concat(m)]||p[m]||d[m]||i;return t?a.createElement(g,l(l({ref:n},c),{},{components:t})):a.createElement(g,l({ref:n},c))}));function g(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,l=new Array(i);l[0]=m;var r={};for(var s in n)hasOwnProperty.call(n,s)&&(r[s]=n[s]);r.originalType=e,r[p]="string"==typeof e?e:o,l[1]=r;for(var u=2;u<i;u++)l[u]=t[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},4609:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>u});var a=t(7462),o=(t(7294),t(3905));const i={},l="Developer guide",r={unversionedId:"note/zaindoc/developer-guide",id:"note/zaindoc/developer-guide",title:"Developer guide",description:"Development/Build/Deployment",source:"@site/docs/note/zaindoc/developer-guide.md",sourceDirName:"note/zaindoc",slug:"/note/zaindoc/developer-guide",permalink:"/zaindoc/docs/note/zaindoc/developer-guide",draft:!1,editUrl:"https://github.com/ZainChen/zaindoc/tree/main/docs/note/zaindoc/developer-guide.md",tags:[],version:"current",frontMatter:{},sidebar:"sidebarIdNote",previous:{title:"Zaindoc",permalink:"/zaindoc/docs/note/zaindoc/"}},s={},u=[{value:"Development/Build/Deployment",id:"developmentbuilddeployment",level:2},{value:"Automated Deployment Configuration",id:"automated-deployment-configuration",level:3},{value:"Search",id:"search",level:2},{value:"Local Search",id:"local-search",level:3},{value:"Internationalization",id:"internationalization",level:2},{value:"Configure docusaurus.config.js",id:"configure-docusaurusconfigjs",level:3},{value:"Develop and Debug Specified Language Site:",id:"develop-and-debug-specified-language-site",level:3},{value:"Translation",id:"translation",level:3},{value:"Translate Markdown Files:",id:"translate-markdown-files",level:4},{value:"Translate Documents",id:"translate-documents",level:5},{value:"Translate Blogs",id:"translate-blogs",level:5},{value:"Translate Pages",id:"translate-pages",level:5},{value:"Translate Built-in Component Copy",id:"translate-built-in-component-copy",level:5},{value:"Build Site",id:"build-site",level:3},{value:"Single-Domain Deployment",id:"single-domain-deployment",level:4},{value:"Pitfalls",id:"pitfalls",level:3},{value:"Page Deployment",id:"page-deployment",level:2},{value:"Overseas",id:"overseas",level:3},{value:"Domestic",id:"domestic",level:3},{value:"References",id:"references",level:2}],c={toc:u},p="wrapper";function d(e){let{components:n,...t}=e;return(0,o.kt)(p,(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"developer-guide"},"Developer guide"),(0,o.kt)("h2",{id:"developmentbuilddeployment"},"Development/Build/Deployment"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# Install dependencies\nnpm i\n\n# Development\nnpm run start\n\n# Build\nnpm run build\n\n# Deployment\n# If GitHub ssh is set up, you can use this command to automatically build and push it to the gh-pages branch of GitHub to trigger page updates\nUSE_SSH=true npm run deploy\n")),(0,o.kt)("h3",{id:"automated-deployment-configuration"},"Automated Deployment Configuration"),(0,o.kt)("p",null,"Add the following two files in the root directory of the project's main branch:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# Configuration for triggering build automatically when main branch is pushed to GitHub\n.github/workflows/deploy.yml\n\n# Configuration for triggering build automatically when main branch is pulled\n.github/workflows/test-deploy.yml\n")),(0,o.kt)("p",null,"Detailed Description: ",(0,o.kt)("a",{parentName:"p",href:"https://docusaurus.io/docs/deployment#triggering-deployment-with-github-actions"},"https://docusaurus.io/docs/deployment#triggering-deployment-with-github-actions")),(0,o.kt)("h2",{id:"search"},"Search"),(0,o.kt)("h3",{id:"local-search"},"Local Search"),(0,o.kt)("p",null,"Install dependencies package"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install --save @easyops-cn/docusaurus-search-local\n")),(0,o.kt)("p",null,"Configure docusaurus.config.js"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:"showLineNumbers",showLineNumbers:!0},'// In your `docusaurus.config.js`:\nmodule.exports = {\n  // ... Your other configurations.\n  themes: [\n    // ... Your other themes.\n    [\n      require.resolve("@easyops-cn/docusaurus-search-local"),\n      {\n        // ... Your options.\n        // `hashed` is recommended as long-term-cache of index file is possible.\n        hashed: true,\n        // For Docs using Chinese, The `language` is recommended to set to:\n        // ```\n        language: ["en", "zh"],\n        // ```\n      },\n    ],\n  ],\n};\n')),(0,o.kt)("p",null,"Detailed Configuration Instructions: ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/easyops-cn/docusaurus-search-local"},"https://github.com/easyops-cn/docusaurus-search-local")),(0,o.kt)("h2",{id:"internationalization"},"Internationalization"),(0,o.kt)("h3",{id:"configure-docusaurusconfigjs"},"Configure docusaurus.config.js"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:"showLineNumbers",showLineNumbers:!0},"module.exports = {\n  i18n: {\n    defaultLocale: 'en',\n    locales: ['en', 'zh-CN'],\n  },\n\n  themeConfig: {\n    navbar: {\n      // Configure language switching component\n      items: [\n        {\n          type: 'localeDropdown',\n          position: 'right',\n        },\n      ],\n    },\n  },\n};\n")),(0,o.kt)("h3",{id:"develop-and-debug-specified-language-site"},"Develop and Debug Specified Language Site:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# Debug the Chinese site\nnpm run start -- --locale zh-CN\n")),(0,o.kt)("h3",{id:"translation"},"Translation"),(0,o.kt)("h4",{id:"translate-markdown-files"},"Translate Markdown Files:"),(0,o.kt)("h5",{id:"translate-documents"},"Translate Documents"),(0,o.kt)("p",null,"Copy the Markdown files from docs/ to i18n/zh-CN/docusaurus-plugin-content-docs/current and translate them as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir -p i18n/zh-CN/docusaurus-plugin-content-docs/current\ncp -r docs/** i18n/zh-CN/docusaurus-plugin-content-docs/current\n")),(0,o.kt)("h5",{id:"translate-blogs"},"Translate Blogs"),(0,o.kt)("p",null,"Copy the Markdown files from docs/ to i18n/zh-CN/docusaurus-plugin-content-blog and translate them as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir -p i18n/zh-CN/docusaurus-plugin-content-blog\ncp -r blog/** i18n/zh-CN/docusaurus-plugin-content-blog\n")),(0,o.kt)("h5",{id:"translate-pages"},"Translate Pages"),(0,o.kt)("p",null,"Copy the document page files from docs/ to i18n/zh-CN/docusaurus-plugin-content-pages and translate them as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir -p i18n/zh-CN/docusaurus-plugin-content-pages\ncp -r src/pages/**.md i18n/zh-CN/docusaurus-plugin-content-pages\ncp -r src/pages/**.mdx i18n/zh-CN/docusaurus-plugin-content-pages\n")),(0,o.kt)("h5",{id:"translate-built-in-component-copy"},"Translate Built-in Component Copy"),(0,o.kt)("p",null,"The following command automatically translates the built-in component copy to the ",(0,o.kt)("inlineCode",{parentName:"p"},"i18n/zh-CN")," directory:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm run write-translations -- --locale zh-CN\n")),(0,o.kt)("h3",{id:"build-site"},"Build Site"),(0,o.kt)("h4",{id:"single-domain-deployment"},"Single-Domain Deployment"),(0,o.kt)("p",null,"The site is built using the same command as before internationalization was added."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm run build\n")),(0,o.kt)("p",null,"Docusaurus will build a single-page application for each language version:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"website/build: Default language is English"),(0,o.kt)("li",{parentName:"ul"},"website/build/zh-cn: Simplified Chinese language")),(0,o.kt)("h3",{id:"pitfalls"},"Pitfalls"),(0,o.kt)("p",null,"If you encounter an error similar to the following, run ",(0,o.kt)("inlineCode",{parentName:"p"},"npm run write-translations -- --locale zh-CN"),", modify the copy in ",(0,o.kt)("inlineCode",{parentName:"p"},"i18n/zh-CN"),", and delete the ",(0,o.kt)("inlineCode",{parentName:"p"},"One min read|")," prefix:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"For locale=zh-CN, a maximum of 1 plural forms are expected (other), but the message contains 2: One min read|1 min read\n")),(0,o.kt)("p",null,"Detailed Instructions: ",(0,o.kt)("a",{parentName:"p",href:"https://docusaurus.io/docs/i18n/tutorial#single-domain-deployment"},"https://docusaurus.io/docs/i18n/tutorial#single-domain-deployment")),(0,o.kt)("h2",{id:"page-deployment"},"Page Deployment"),(0,o.kt)("h3",{id:"overseas"},"Overseas"),(0,o.kt)("p",null,"Directly use ",(0,o.kt)("inlineCode",{parentName:"p"},"GitHub")," to deploy the page"),(0,o.kt)("p",null,"Page URL: ",(0,o.kt)("a",{parentName:"p",href:"https://zainchen.github.io/zaindoc"},"https://zainchen.github.io/zaindoc"),"\nProject URL: ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/ZainChen/zaindoc"},"https://github.com/ZainChen/zaindoc")),(0,o.kt)("h3",{id:"domestic"},"Domestic"),(0,o.kt)("p",null,"Use ",(0,o.kt)("inlineCode",{parentName:"p"},"Gitee")," to deploy the page"),(0,o.kt)("p",null,"Page URL: ",(0,o.kt)("a",{parentName:"p",href:"https://zainczy.gitee.io/zaindoc"},"https://zainczy.gitee.io/zaindoc"),"\nProject URL: ",(0,o.kt)("a",{parentName:"p",href:"https://gitee.com/zainczy/zaindoc"},"https://gitee.com/zainczy/zaindoc")),(0,o.kt)("h2",{id:"references"},"References"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Official Documentation (Multilingual): ",(0,o.kt)("a",{parentName:"li",href:"https://docusaurus.io"},"https://docusaurus.io")),(0,o.kt)("li",{parentName:"ul"},"Triggering GitHub Actions Automatic Deployment: ",(0,o.kt)("a",{parentName:"li",href:"https://docusaurus.io/docs/deployment#triggering-deployment-with-github-actions"},"https://docusaurus.io/docs/deployment#triggering-deployment-with-github-actions")),(0,o.kt)("li",{parentName:"ul"},"Local Search: ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/easyops-cn/docusaurus-search-local"},"https://github.com/easyops-cn/docusaurus-search-local")),(0,o.kt)("li",{parentName:"ul"},"Internationalization: ",(0,o.kt)("a",{parentName:"li",href:"https://docusaurus.io/docs/i18n/tutorial#single-domain-deployment"},"https://docusaurus.io/docs/i18n/tutorial#single-domain-deployment"))))}d.isMDXComponent=!0}}]);